(()=>{"use strict";var e={4586:(e,t,n)=>{n.r(t)},3208:(e,t,n)=>{n.r(t)},4178:(e,t,n)=>{n.r(t)},4203:(e,t,n)=>{n.r(t)},3674:(e,t,n)=>{n.r(t)},7075:(e,t,n)=>{n.r(t)},5320:(e,t,n)=>{n.r(t)},9959:(e,t,n)=>{n.r(t)},826:(e,t,n)=>{n.r(t)},8493:(e,t,n)=>{n.r(t)},923:(e,t,n)=>{n.r(t)},2706:(e,t,n)=>{n.r(t)},7880:(e,t,n)=>{n.r(t)},1404:(e,t,n)=>{n.r(t)},1788:(e,t,n)=>{n.r(t)},1736:(e,t,n)=>{n.r(t)},5741:(e,t,n)=>{n.r(t)},6859:(e,t,n)=>{n.r(t)},3927:(e,t,n)=>{n.r(t)},9047:(e,t,n)=>{n.r(t)},1380:(e,t,n)=>{n.r(t)},2488:(e,t,n)=>{n.r(t)},9420:(e,t,n)=>{n.r(t)},5556:(e,t,n)=>{n.r(t)},1017:(e,t,n)=>{n.r(t)},7462:(e,t,n)=>{n.r(t)},6354:(e,t,n)=>{n.r(t)},6713:(e,t,n)=>{n.r(t)},9021:(e,t,n)=>{n.r(t)},2866:(e,t,n)=>{n.r(t)},3299:(e,t,n)=>{n.r(t)},285:(e,t,n)=>{n.r(t)},1331:(e,t,n)=>{n.r(t)},356:(e,t,n)=>{n.r(t)},9794:(e,t,n)=>{n.r(t)},1307:(e,t,n)=>{n.r(t)},3810:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutPageMainContainer=void 0,n(2488);const s=n(2178),i=n(349);class o extends s.BaseComponent{constructor(){super("div",["container","main__container"]),this.title=new s.BaseComponent("h2",["main__title"]).element,this.title.innerHTML="How to play?",this.instruction=(new i.Instruction).element,this.element.append(this.title,this.instruction)}}t.AboutPageMainContainer=o},9160:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutPageMain=void 0,n(9420);const s=n(2178),i=n(3810);class o extends s.BaseComponent{constructor(){super("main",["main"]),this.container=new i.AboutPageMainContainer,this.element.append(this.container.element)}}t.AboutPageMain=o},3073:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationField=void 0,n(4586);const s=n(2178),i=n(2572),o=n(8205),a=n(1806),r=n(5628),l=n(7494),d=n(7558);class c extends s.BaseComponent{constructor(){super("div",["authorization-field"]),this.registrationButton=(new i.RegistrationButton).element,this.startGameButton=(new o.StartGameButton).element,this.stopGameButton=(new a.StopGameButton).element,this.photo=(new l.HeaderUserImg).element,this.element.append(this.registrationButton,this.startGameButton,this.stopGameButton,this.photo),d.AUTHORISE.loggedIn&&this.showLoggedInButtons()}showLoggedInButtons(){this.registrationButton.classList.add(r.constants.HIDDEN_BTN_CLASS),this.startGameButton.classList.remove(r.constants.HIDDEN_BTN_CLASS),this.photo.classList.remove(r.constants.HIDDEN_BTN_CLASS)}hideStartingButtons(){this.startGameButton.classList.add(r.constants.HIDDEN_BTN_CLASS),this.stopGameButton.classList.remove(r.constants.HIDDEN_BTN_CLASS)}}t.AuthorizationField=c},5819:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(3208);const s=n(2178),i=n(5628);class o extends s.BaseComponent{constructor(e){super("div",["card__wrapper"]),this.img=e,this.isFlipped=!1,this.element.innerHTML=`\n      <div class="card">\n        <div class="card__front"\n          style="background-image: url(./images/${e})">\n        </div>\n        <div class="card__back"></div>\n      </div>\n    `}flip(e=!1){return new Promise((t=>{this.element.classList.toggle(i.constants.FLIP_CLASS,e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}}t.Card=o},3186:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.database=void 0;const s=n(7558);t.database=new class{constructor(e="authorization"){this.storeName=e,this.database=null,this.databaseRequest=indexedDB.open("latherapist",1),this.databaseRequest.addEventListener("upgradeneeded",(()=>this.createStore())),this.databaseRequest.addEventListener("success",(()=>this.database=this.databaseRequest.result))}createStore(){this.database=this.databaseRequest.result;const e=this.database.createObjectStore(this.storeName,{keyPath:"email",autoIncrement:!0});e.createIndex("firstName","firstName"),e.createIndex("lastName","lastName"),e.createIndex("score","score"),e.createIndex("email","email",{unique:!0})}makeTransaction(e){var t;const n=null===(t=this.database)||void 0===t?void 0:t.transaction(this.storeName,"readwrite"),s=null==n?void 0:n.objectStore(this.storeName);null==s||s.put(e)}takeAllData(){var e;const t=null===(e=this.database)||void 0===e?void 0:e.transaction(this.storeName,"readonly"),n=null==t?void 0:t.objectStore(this.storeName);return null==n?void 0:n.getAll()}getCurrentPlayerData(){var e;const t=null===(e=this.database)||void 0===e?void 0:e.transaction(this.storeName,"readonly"),n=null==t?void 0:t.objectStore(this.storeName),i=null==n?void 0:n.index("email");return null==i?void 0:i.get(s.AUTHORISE.email)}}},7933:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmailField=void 0;const s=n(6538),i=n(2255),o=n(489);class a extends s.Field{constructor(){super(),this.label=new i.FieldLabel("email","E-mail").element,this.input=(new o.EmailInput).element,this.element.prepend(this.label,this.input)}}t.EmailField=a},489:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmailInput=void 0;const s=n(4870);class i extends s.FieldInpunt{constructor(){super(),this.element.type="email",this.element.placeholder="Jessie.Doe@gmail.com",this.element.name="email"}}t.EmailInput=i},4870:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldInpunt=void 0,n(4178),t.FieldInpunt=class{constructor(){this.element=document.createElement("input"),this.element.classList.add("field__input"),this.element.required=!0,this.element.setAttribute("max-length","30")}}},2255:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldLabel=void 0,n(4203),t.FieldLabel=class{constructor(e,t){this.element=document.createElement("label"),this.element.classList.add("field__label"),this.element.setAttribute("for",e),this.element.innerHTML=t}}},6538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;const s=n(2178);n(3674);class i extends s.BaseComponent{constructor(){super("div",["field"]),this.validation=new s.BaseComponent("div",["field__validation"]).element,this.element.append(this.validation)}}t.Field=i},6553:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileLoader=void 0,n(7075),t.FileLoader=class{constructor(){this.element=document.createElement("input"),this.element.type="file",this.element.classList.add("file-loader")}loadImg(e){const t=this.element.files;if(t){const n=t[0],s=new FileReader;s.readAsDataURL(n),s.onload=()=>{e&&s.result&&(e.src=s.result.toString())},this.element.value=""}}}},8270:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirstNameField=void 0;const s=n(6538),i=n(2255),o=n(1634);class a extends s.Field{constructor(){super(),this.label=new i.FieldLabel("first-name","First Name").element,this.input=(new o.FirstNameInput).element,this.element.prepend(this.label,this.input)}}t.FirstNameField=a},1634:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FirstNameInput=void 0;const s=n(5628),i=n(4870);class o extends i.FieldInpunt{constructor(){super(),this.element.type="text",this.element.placeholder="Jessie",this.element.name="first-name",this.element.setAttribute("pattern",s.constants.NAME_REGEXP)}}t.FirstNameInput=o},7708:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormFields=void 0,n(9959);const s=n(2178),i=n(8270),o=n(7247),a=n(7933);class r extends s.BaseComponent{constructor(){super("div",["form__fields"]),this.firstNameField=new i.FirstNameField,this.lastNameField=new o.LastNameField,this.emailField=new a.EmailField,this.element.append(this.firstNameField.element,this.lastNameField.element,this.emailField.element)}}t.FormFields=r},2926:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormFooter=void 0,n(826);const s=n(2178),i=n(3481),o=n(4571);class a extends s.BaseComponent{constructor(){super("div",["form__footer"]),this.submitButton=(new i.FormSubmitButton).element,this.resetButton=(new o.FormResetButton).element,this.element.append(this.submitButton,this.resetButton)}}t.FormFooter=a},2225:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormHeader=void 0,n(8493);const s=n(2178);class i extends s.BaseComponent{constructor(){super("h3",["form__header"]),this.element.innerHTML="Register new Player"}}t.FormHeader=i},8753:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormImageWrapper=void 0;const s=n(2178),i=n(6553),o=n(4509);n(923);class a extends s.BaseComponent{constructor(){super("div",["form__img_wrapper"]),this.image=(new o.FormImage).element,this.fileLoader=new i.FileLoader,this.element.append(this.image,this.fileLoader.element),this.fileLoader.element.addEventListener("change",this.fileLoader.loadImg.bind(this.fileLoader,this.image))}}t.FormImageWrapper=a},4509:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormImage=void 0,n(2706),t.FormImage=class{constructor(){this.element=document.createElement("img"),this.element.classList.add("form__img"),this.element.alt="Player photo",this.element.src="./images/avatar.svg"}}},5586:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormMain=void 0,n(7880);const s=n(2178),i=n(7708),o=n(8753);class a extends s.BaseComponent{constructor(){super("div",["form__main"]),this.fields=new i.FormFields,this.imageWrapper=new o.FormImageWrapper,this.element.append(this.fields.element,this.imageWrapper.element)}}t.FormMain=a},4571:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormResetButton=void 0,n(5320),t.FormResetButton=class{constructor(){this.element=document.createElement("button"),this.element.classList.add("pop-up__btn","btn_reset"),this.element.type="reset",this.element.innerHTML="cancel"}}},3481:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormSubmitButton=void 0;const s=n(7558);n(5320),t.FormSubmitButton=class{constructor(){this.element=document.createElement("button"),this.element.classList.add("pop-up__btn","btn_submit"),this.element.type="submit",this.element.innerHTML="add user",this.element.addEventListener("click",(()=>s.AUTHORISE.loggedIn=!0))}}},9582:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0,n(1404);const s=n(2178),i=n(2926),o=n(2225),a=n(5586);class r extends s.BaseComponent{constructor(){super("form",["form"]),this.header=new o.FormHeader,this.main=new a.FormMain,this.footer=new i.FormFooter,this.element.append(this.header.element,this.main.element,this.footer.element)}}t.Form=r},677:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GameField=void 0,n(1788);const i=n(2178),o=n(5628),a=n(4680);class r extends i.BaseComponent{constructor(){super("div",["game-field"]),this.cards=[]}clearField(){this.cards=[],this.element.innerHTML=""}addCards(e){return s(this,void 0,void 0,(function*(){this.cards=e,this.cards.forEach((e=>{this.element.append(e.element)})),yield a.delay(o.constants.FLIP_ALL_CARDS_TIME),this.cards.forEach((e=>e.flipToBack()))}))}}t.GameField=r},5538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GamePageMainContainer=void 0,n(2488);const s=n(2178),i=n(677),o=n(3715);class a extends s.BaseComponent{constructor(){super("div",["container","main__container"]),this.timer=new o.Timer,this.gameField=new i.GameField,this.element.append(this.timer.element,this.gameField.element)}}t.GamePageMainContainer=a},7766:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GamePageMain=void 0,n(9420);const s=n(2178),i=n(1914);class o extends s.BaseComponent{constructor(){super("main",["main"]),this.game=new i.Game,this.element.append(this.game.element)}startGame(){const e=localStorage.getItem("category")||"animals",t=localStorage.getItem("difficulty")||16,n=[{category:"animals",images:["black-bird.jpg","camel.jpg","deer.jpg","dog.jpg","duck.jpg","eagle.jpg","elephant.jpg","frog.jpg","goat.jpg","koala.jpg","lama.jpg","lion.jpg","lizard.jpg","owl.jpg","penguin.jpg","squirrel.jpg","tiger.jpg","wolf.jpg"]},{category:"colours",images:["green.png","blue.png","violet.png","yellow.png","orange.png","red.png","brown.png","white.png","grey.png","black.png","pink.png","lime.png","turquoise.png","gold.png","darkcyan.png","antiquewhite.png.png"]}].find((t=>t.category===e));if(n){const{images:e}=n,s=e.sort((()=>Math.random()-.5)).slice(0,+t/2);this.game.initGame(s)}}}t.GamePageMain=o},1914:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const i=n(5538),o=n(5819),a=n(4680),r=n(5628),l=n(4880),d=n(3186);class c extends i.GamePageMainContainer{constructor(){super(...arguments),this.doingAnimation=!1,this.missclicks=0,this.remainCards=Number(localStorage.getItem("difficulty"))||16,this.database=d.database,this.popup=null}toggleWrongClass(e){e.forEach((e=>{e.classList.toggle(r.constants.WRONG_CARD_CLASS)}))}initGame(e){return s(this,void 0,void 0,(function*(){this.gameField.clearField();const t=e.concat(e).map((e=>new o.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>{this.handleCard(e)}))})),yield this.gameField.addCards(t),this.timer.initTimer()}))}addScore(e){const t=this.database.getCurrentPlayerData();null==t||t.addEventListener("success",(()=>{const n=t.result;n.score>e||(n.score=e,this.database.makeTransaction(n))}))}calculateResults(){const e=Number(this.timer.seconds.innerText),t=Number(this.timer.minutes.innerText);let n=100*(Number(localStorage.getItem("difficulty"))/2-this.missclicks)-10*(60*t+e);return n<0&&(n=0),this.addScore(n),{min:t,sec:e,score:n}}showPopUp(){const e=this.calculateResults();this.popup=new l.WinnerPopUp(e),document.body.append(this.popup.element),this.popup.showPopUp.call(this.popup),this.popup.linkWrapper.link.addEventListener("click",(()=>{var e;null===(e=this.popup)||void 0===e||e.hidePopUp.call(this.popup)}))}finishGame(){this.timer.stopTimer(),this.showPopUp()}handleCard(e){return s(this,void 0,void 0,(function*(){if(!this.doingAnimation&&e.isFlipped){if(this.doingAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.doingAnimation=!1);this.activeCard.img!==e.img?(this.toggleWrongClass([e.element,this.activeCard.element]),yield a.delay(r.constants.FLIP_CARD_DELAY),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()]),this.missclicks+=1,this.toggleWrongClass([e.element,this.activeCard.element])):this.remainCards-=2,this.activeCard=void 0,this.doingAnimation=!1,0===this.remainCards&&this.finishGame()}}))}}t.Game=c},4715:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderLogo=void 0,n(5741);const s=n(2178);class i extends s.BaseComponent{constructor(){super("h1",["logo"]),this.element.innerHTML+='\n      <span class="logo_top">match</span>\n      <span class="logo_bottom">match</span>\n    '}}t.HeaderLogo=i},9427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNav=void 0,n(6859);const s=n(2178),i=n(4060);class o extends s.BaseComponent{constructor(){super("nav",["nav"]),this.list=new i.NavList,this.element.append(this.list.element)}}t.HeaderNav=o},7494:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderUserImg=void 0;const s=n(7558),i=n(3186);t.HeaderUserImg=class{constructor(){if(this.database=i.database,this.element=document.createElement("img"),this.element.classList.add("player__photo","hidden-btn"),s.AUTHORISE.loggedIn){const e=this.database.getCurrentPlayerData();null==e||e.addEventListener("success",(()=>{const t=e.result;this.element.src=t.photo}))}}}},199:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,n(3927);const s=n(2178),i=n(4715),o=n(9427),a=n(3073),r=n(9940);class l extends s.BaseComponent{constructor(){super("header",["header"]),this.logo=(new i.HeaderLogo).element,this.nav=new o.HeaderNav,this.authorizationField=new a.AuthorizationField,this.popUp=new r.RegistrationPopUp,this.element.append(this.logo,this.nav.element,this.authorizationField.element,this.popUp.element),this.authorizationField.registrationButton.addEventListener("click",this.popUp.showPopUp.bind(this.popUp)),this.popUp.form.element.addEventListener("submit",(()=>{this.authorizationField.showLoggedInButtons.call(this.authorizationField),this.addUserImage()}))}addUserImage(){const e=this.popUp.form.main.imageWrapper.image.src;this.authorizationField.photo.src=e}}t.Header=l},6098:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstructionRow=void 0,n(9047);const s=n(2178);class i extends s.BaseComponent{constructor(e){super("div",["instruction__row"]),this.element.innerHTML=`\n    <div class="instruction__block ${e.class}">\n      <div class="instruction__block_container">\n        <div class="instruction__counter">${e.counter}</div>\n        <p class="instruction__text">${e.text}</p>\n      </div>\n    </div>\n    <div class="instruction__img">\n      <img src="${e.img}" alt="${e.alt}">\n    </div>\n    `}}t.InstructionRow=i},349:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Instruction=void 0,n(1380);const s=n(2178),i=n(6098);class o extends s.BaseComponent{constructor(){super("div",["instruction"]),this.loadContent()}loadContent(){[{counter:1,class:"instruction__block_registration",text:"Register new player in game",img:"./images/registration.png",alt:"registration"},{counter:2,class:"instruction__block_configuration",text:"Configure your game settings",img:"./images/configuration.svg",alt:"configuration"},{counter:3,class:"instruction__block_example",text:"Start you new game! Remember card positions and match it before times up.",img:"./images/game-example.png",alt:"game-example"}].forEach((e=>{this.element.append(new i.InstructionRow(e).element)}))}}t.Instruction=o},7247:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LastNameField=void 0;const s=n(6538),i=n(2255),o=n(8332);class a extends s.Field{constructor(){super(),this.label=new i.FieldLabel("last-name","Last Name").element,this.input=(new o.LastNameInput).element,this.element.prepend(this.label,this.input)}}t.LastNameField=a},8332:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LastNameInput=void 0;const s=n(5628),i=n(4870);class o extends i.FieldInpunt{constructor(){super(),this.element.type="text",this.element.placeholder="Doe",this.element.name="last-name",this.element.setAttribute("pattern",s.constants.NAME_REGEXP)}}t.LastNameInput=o},3603:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavItem=void 0,n(5556);const s=n(2178);class i extends s.BaseComponent{constructor(e){super("li",["nav__item",e.class]),this.element.innerHTML=`\n      <a class="nav__link" href=${e.link}>${e.text}</a>\n    `}}t.NavItem=i},4060:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavList=void 0;const s=n(2178),i=n(3603);class o extends s.BaseComponent{constructor(){super("ul",["nav__list"]),this.aboutPageLink=null,this.scorePageLink=null,this.settingsPageLink=null;this.aboutPageLink=new i.NavItem({class:"nav__item_about",link:"#/",text:"About Game"}).element,this.scorePageLink=new i.NavItem({class:"nav__item_score",link:"#/score",text:"Best Score"}).element,this.settingsPageLink=new i.NavItem({class:"nav__item_settings",link:"#/settings",text:"Game Settings"}).element,this.element.append(this.aboutPageLink,this.scorePageLink,this.settingsPageLink),this.makeRouteActive()}makeRouteActive(){var e,t,n;switch(window.location.hash.slice(1)||"/"){case"/":null===(e=this.aboutPageLink)||void 0===e||e.classList.add("active-route");break;case"/score":null===(t=this.scorePageLink)||void 0===t||t.classList.add("active-route");break;case"/settings":null===(n=this.settingsPageLink)||void 0===n||n.classList.add("active-route")}}}t.NavList=o},2737:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlayersListItem=void 0,n(1017);const s=n(2178);class i extends s.BaseComponent{constructor(e){super("li",["players-list__item"]),this.element.innerHTML=`\n      <div class="player__info">\n        <img class="player__photo"\n          src="${e.photo}"\n          alt="player-photo">\n        <div class="player__contacts">\n          <span class="player__name">${e.firstName} ${e.lastName}</span>\n          <span class="player__mail">${e.email}</span>\n        </div>\n      </div>\n      <div class="player__score">\n        <span>Score:</span>\n        <span class="player__score_number">${e.score}</span>\n      </div>\n    `}}t.PlayersListItem=i},9393:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlayersList=void 0,n(7462);const s=n(2178),i=n(3186),o=n(2737);class a extends s.BaseComponent{constructor(){super("ul",["players-list"]),this.database=i.database;const e=this.database.takeAllData.call(this.database);e&&(e.onsuccess=()=>{const t=e.result;t.sort(((e,t)=>t.score-e.score)),t.forEach((e=>{this.element.append(new o.PlayersListItem(e).element)}))})}}t.PlayersList=a},8459:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PopUp=void 0,n(6354);const s=n(2178),i=n(5628);class o extends s.BaseComponent{constructor(){super("div",["pop-up"]),this.cover=new s.BaseComponent("div",["cover"]).element}showPopUp(){document.body.append(this.cover),document.body.classList.add(i.constants.FIX_SCREEN_CLASS),this.element.classList.add("active")}hidePopUp(){this.cover.remove(),document.body.classList.remove(i.constants.FIX_SCREEN_CLASS),this.element.classList.remove("active")}}t.PopUp=o},2572:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegistrationButton=void 0,n(1736);const s=n(2178);class i extends s.BaseComponent{constructor(){super("button",["header__btn"]),this.element.innerHTML="Registration"}}t.RegistrationButton=i},9940:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegistrationPopUp=void 0,n(6713);const s=n(8459),i=n(9582),o=n(3186),a=n(7558);class r extends s.PopUp{constructor(){super(),this.database=o.database,this.element.classList.add("pop-up_registration"),this.form=new i.Form,this.element.append(this.form.element),this.form.element.onsubmit=()=>!1,this.form.footer.submitButton.addEventListener("click",this.submitForm.bind(this)),this.form.footer.resetButton.addEventListener("click",this.hidePopUp.bind(this))}saveUserInfo(){const e=this.form.main.fields.firstNameField.input.value,t=this.form.main.fields.lastNameField.input.value,n=this.form.main.fields.emailField.input.value,s=this.form.main.imageWrapper.image.src;this.database.makeTransaction({firstName:e,lastName:t,email:n,score:0,photo:s}),a.AUTHORISE.email=n}submitForm(){this.saveUserInfo(),this.hidePopUp()}}t.RegistrationPopUp=r},8571:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScorePageMainContainer=void 0,n(2488);const s=n(2178),i=n(9393);class o extends s.BaseComponent{constructor(){super("div",["container","main__container"]),this.title=new s.BaseComponent("h2",["main__title"]).element,this.title.innerHTML="Best players",this.list=new i.PlayersList,this.element.append(this.title,this.list.element)}}t.ScorePageMainContainer=o},3800:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScorePageMain=void 0,n(9420);const s=n(2178),i=n(8571);class o extends s.BaseComponent{constructor(){super("main",["main"]),this.container=new i.ScorePageMainContainer,this.element.append(this.container.element)}}t.ScorePageMain=o},6887:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingDropdown=void 0,n(9021);const s=n(656);t.SettingDropdown=class{constructor(e){this.element=document.createElement("select"),this.element.name=e.name,this.element.classList.add("setting__dropdown"),this.placeholder=new s.SettingPlaceholder(e.placeholder).element,this.element.append(this.placeholder),e.options.forEach((e=>{this.element.append(new Option(e.text,e.value))})),this.element.onchange=()=>{localStorage.setItem(this.element.name,this.element.value)}}}},2568:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingItem=void 0,n(2866);const s=n(2178),i=n(6887);class o extends s.BaseComponent{constructor(e){super("li",["setting"]),this.title=new s.BaseComponent("h2",["setting__title"]).element,this.title.innerHTML=e.title,this.dropdown=new i.SettingDropdown(e).element,this.element.append(this.title,this.dropdown)}}t.SettingItem=o},656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingPlaceholder=void 0,t.SettingPlaceholder=class{constructor(e){this.element=new Option(e),this.element.selected=!0,this.element.disabled=!0}}},5159:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsList=void 0,n(3299);const s=n(2178),i=n(2568);class o extends s.BaseComponent{constructor(){super("ul",["settings__list"]),this.loadContent()}loadContent(){[{name:"category",title:"Game cards",placeholder:"select cards type",options:[{value:"animals",text:"animals"},{value:"colours",text:"colours"}]},{name:"difficulty",title:"Difficulty",placeholder:"select game type",options:[{value:"8",text:"4x2"},{value:"16",text:"4x4"},{value:"36",text:"6x6"}]}].forEach((e=>{this.element.append(new i.SettingItem(e).element)}))}}t.SettingsList=o},257:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsPageMain=void 0,n(9420);const s=n(2178),i=n(5159);class o extends s.BaseComponent{constructor(){super("div",["main"]),this.list=new i.SettingsList,this.element.append(this.list.element)}}t.SettingsPageMain=o},8205:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StartGameButton=void 0,n(1736);const s=n(5628);t.StartGameButton=class{constructor(){this.element=document.createElement("a"),this.element.href="#/app",this.element.classList.add("header__btn",s.constants.HIDDEN_BTN_CLASS),this.element.innerHTML="Start game"}}},1806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StopGameButton=void 0,n(1736);const s=n(5628);t.StopGameButton=class{constructor(){this.element=document.createElement("a"),this.element.href="#/",this.element.classList.add("header__btn",s.constants.HIDDEN_BTN_CLASS),this.element.innerHTML="Stop game"}}},3715:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0,n(285);const s=n(2178),i=n(289);class o extends s.BaseComponent{constructor(){super("div",["timer"]),this.timerInterval=null,this.colon=new s.BaseComponent("span").element,this.colon.innerHTML=":",this.minutes=new s.BaseComponent("span").element,this.minutes.innerHTML="00",this.seconds=new s.BaseComponent("span").element,this.seconds.innerHTML="00",this.element.append(this.minutes,this.colon,this.seconds)}initTimer(){this.stopTimer();let e=0;this.timerInterval=setInterval((()=>{e+=1;const t=e%60,n=Math.floor(e/60);this.seconds.innerHTML=i.addZero(t),this.minutes.innerHTML=i.addZero(n)}),1e3)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=null}}t.Timer=o},8429:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerLink=void 0,n(1331);const s=n(2178);class i extends s.BaseComponent{constructor(){super("div",["winner-link_wrapper"]),this.link=document.createElement("a"),this.link.classList.add("pop-up__btn","winner-link"),this.link.href="#/score",this.link.innerHTML="ok",this.element.append(this.link)}}t.WinnerLink=i},4880:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerPopUp=void 0,n(356);const s=n(8459),i=n(8429),o=n(8409);class a extends s.PopUp{constructor(e){super(),this.element.classList.add("pop-up_winner"),this.text=new o.WinnerText(e).element,this.linkWrapper=new i.WinnerLink,this.element.append(this.text,this.linkWrapper.element)}}t.WinnerPopUp=a},8409:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerText=void 0,n(9794);const s=n(2178);class i extends s.BaseComponent{constructor(e){super("p",["winner-text"]),this.element.innerHTML=`\n      Congratulations! You successfully found all matches.\n      It took ${e.min}:${e.sec} minutes. You gain ${e.score} points.\n    `}}t.WinnerText=i},2274:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.About=void 0;const s=n(9160),i=n(199);t.About=class{constructor(e){this.rootElement=e,this.header=new i.Header,this.main=new s.AboutPageMain,this.rootElement.append(this.header.element,this.main.element)}}},8566:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(199),i=n(7766);t.App=class{constructor(e){this.rootElement=e,this.header=new s.Header,this.main=new i.GamePageMain,this.main.startGame(),this.header.authorizationField.hideStartingButtons.call(this.header.authorizationField),this.rootElement.append(this.header.element,this.main.element)}}},4363:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0;const s=n(199),i=n(3800);t.Score=class{constructor(e){this.rootElement=e,this.header=new s.Header,this.main=new i.ScorePageMain,this.rootElement.append(this.header.element,this.main.element)}}},9334:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const s=n(199),i=n(257);t.Settings=class{constructor(e){this.rootElement=e,this.header=new s.Header,this.main=new i.SettingsPageMain,this.rootElement.append(this.header.element,this.main.element)}}},7873:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const s=n(2178),i=n(2274),o=n(8566),a=n(4363),r=n(9334);t.Router=class{constructor(){this.wrapper=new s.BaseComponent("div",["wrapper"]).element,this.routes=[{name:"/",renderComponent:()=>{new i.About(this.wrapper)}},{name:"/score",renderComponent:()=>{new a.Score(this.wrapper)}},{name:"/settings",renderComponent:()=>{new r.Settings(this.wrapper)}},{name:"/app",renderComponent:()=>{new o.App(this.wrapper)}}]}clearWrapper(){this.wrapper.innerHTML=""}findRoute(){const e=window.location.hash.slice(1)||"/";return this.routes.find((t=>t.name===e))}changeComponent(){var e;this.clearWrapper(),null===(e=this.findRoute())||void 0===e||e.renderComponent(),document.body.append(this.wrapper)}}},289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addZero=void 0,t.addZero=e=>e<10?`0${e}`:String(e)},7558:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AUTHORISE=void 0,t.AUTHORISE={loggedIn:!1,email:""}},2178:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},5628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.constants=void 0,t.constants={FLIP_ALL_CARDS_TIME:3e4,FLIP_CARD_DELAY:2e3,FLIP_CLASS:"flipped",FIX_SCREEN_CLASS:"block-screen",NAME_REGEXP:"^[\\p{L}0-9-]*[\\p{L}]{1}[\\p{L}0-9-]*$",HIDDEN_BTN_CLASS:"hidden-btn",WRONG_CARD_CLASS:"wrong-choice"}},4680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=e=>new Promise((t=>{setTimeout(t,e)}))}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(1307);const e=new(n(7873).Router);window.onload=()=>{e.changeComponent()},window.onpopstate=()=>{e.changeComponent()}})()})();